<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sensor Size Comparison</title>
<style>
  .rectangle {
    position: relative; /* Add position relative for positioning text */
    display: flex;
    align-items: center;
    justify-content: center;
    color: black; /* Text color */
    font-size: 18px; /* Text font size */ 
  }
  .rectangle1 {
    background-color: #e0829d;
  }
  .rectangle2 {
    background-color: #4fa5d8;
  }
  .rectangle-container {
  display: flex;
  align-items: center;
  }
  .rectangle-height {
    margin-right: 10px; /* Adjust spacing between rectangle and text */
    writing-mode: vertical-lr; /* Rotate text to the left by 90Â° */
    transform: rotate(180deg); /* Correct orientation for vertical text */
  }
  .rectangle-width {
    margin-top: 10px;
    margin-left: 27px;
    margin-bottom: 20px;
  }
  .diameter {
    position: relative; /* Add position relative for positioning text */
    display: flex;
    align-items: center;
    justify-content: center;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(315deg);
  }
</style>
</head>
<body onload="renderRectangle(1), renderRectangle(2), renderImage()">
  <label for="sensorSelect1">Select Dimension:</label>
  <select id="sensorSelect1" onchange="renderRectangle(1)">
    <option value="smaller 1in">Smaller 1in (e.g. 1/3")</option>
    <option value="APS-C">APS-C</option>
    <option value="Full Frame">Full Frame</option>
    <option value="Custom">Custom</option>
  </select>
  <select id="ratioSelect1" onchange="renderRectangle(1)">
    <option value="4:3">4:3</option>
    <option value="3:2">3:2</option>
  </select>
  <label for="valueInput1">Enter Diagonal (denominator for 1"):</label>
  <input type="number" id="valueInput1" name="valueInput1" min="1" value="1">
  <button onclick="renderRectangle(1)">Update</button>
  <input type="checkbox" id="showDiameter1" onchange="toggleTextVisibility(1)" checked>
  <h3 id="sensorTitle1"></h3>
  
  <div class="rectangle-container" id="rectangleContainer1">
    <div class="rectangle-height" id="height1"></div>
    <div class="rectangle1" id="rectangle1">
      <div class="diameter" id="diameter1"></div>
    </div>
  </div>
  <div class="rectangle-width" id="width1"></div>
  
  <label for="sensorSelect2">Select Dimension:</label>
  <select id="sensorSelect2" onchange="renderRectangle(2)">
    <option value="smaller 1in">Smaller 1in (e.g. 1/3")</option>
    <option value="APS-C">APS-C</option>
    <option value="Full Frame">Full Frame</option>
    <option value="Custom">Custom</option>
  </select>
  <select id="ratioSelect2" onchange="renderRectangle(2)">
    <option value="4:3">4:3</option>
    <option value="3:2">3:2</option>
  </select>
  <label for="valueInput2">Enter Diagonal (denominator for 1"):</label>
  <input type="number" id="valueInput2" name="valueInput2" min="1" value="1">
  <button onclick="renderRectangle(2)">Update</button>
  <input type="checkbox" id="showDiameter2" onchange="toggleTextVisibility(2)" checked>
  <h3 id="sensorTitle2"></h3>


  <div class="rectangle-container" id="rectangleContainer2">
    <div class="rectangle-height" id="height2"></div>
    <div class="rectangle2" id="rectangle2">
      <div class="diameter" id="diameter2"></div>
    </div>
  </div>
  <div class="rectangle-width" id="width2"></div>
<!-- Fuer die Berechung der Pixel: 16.25 * 15 -->
  <img id="image" src="./img/1_euro_cent_common.webp" alt="Euro Cent for reference" width="244" height="244"> 

  <script>
    function renderRectangle(rectangleNumber) {
      var sensorType = document.getElementById("sensorSelect" + rectangleNumber).value;
      var aspectRatio = document.getElementById("ratioSelect" + rectangleNumber).value;
      var value = document.getElementById("valueInput" + rectangleNumber).value;
      var width, height;
      var multiplier = 15;

      if (aspectRatio === "4:3") {
        aspectRatio = 0.75
      }
      else if (aspectRatio === "3:2") {
        aspectRatio = 2 / 3
      }

      if (sensorType === "Full Frame") {
        width = 36;
        height = 24;
      }
      else if (sensorType === "APS-C") {
        width = 22;
        height = 14.8;
      }
      else if (sensorType === "smaller 1in") {
        value = 16 / value;
        width = Math.sqrt((value ** 2) / (aspectRatio ** 2 + 1));
        height = width * aspectRatio;
      }
      else if (sensorType === "Custom") {
        width = Math.sqrt((value ** 2) / (aspectRatio ** 2 + 1));
        height = width * aspectRatio;
      }

      var rectangle = document.getElementById("rectangle" + rectangleNumber);
      rectangle.style.width = width * multiplier + "px";
      rectangle.style.height = height * multiplier + "px";
      diameter = Math.sqrt(height ** 2 + width ** 2);
      
      document.getElementById("width" + rectangleNumber).textContent = "\u2190  " + (width).toFixed(2) + " mm" + "  \u2192";
      document.getElementById("height" + rectangleNumber).textContent = "\u2190  " + (height).toFixed(2) + " mm" + "  \u2192";
      document.getElementById("diameter" + rectangleNumber).textContent = "\u2190  " + (diameter).toFixed(2) + " mm" + "  \u2192";
      document.getElementById("sensorTitle" + rectangleNumber).textContent = "test";
    }
    
    function toggleTextVisibility(rectangleNumber) {
      var checkbox = document.getElementById("showDiameter" + rectangleNumber);
      var textElement = document.getElementById("diameter" + rectangleNumber);
      textElement.style.display = checkbox.checked ? "block" : "none";
    }

    function renderImage() {
      var img = document.getElementById("image");

      var newSize = 16.25 * multiplier;

      img.width = newSize + "px";
      img.height = newSize + "px";
    }
  </script>
</body>
</html>
