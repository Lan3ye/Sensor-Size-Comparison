<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sensor Size Comparison</title>
<style>
  .container {
    display: grid;
    grid-template-columns: auto auto; /* two columns */
  }
  .left {
    margin-left: 20px;
    margin-top: 20px;
  }
  .right {
    margin-right: 150px;
  }
  .select-dimension {
    font-size: x-large;
    font-family: Arial, Helvetica, sans-serif;
  }
  .select {
    font-size: large;
    font-family: Arial, Helvetica, sans-serif;
    margin-left: 5px;
  }
  .diagonal-label {
    font-size: x-large;
    font-family: Arial, Helvetica, sans-serif;
  }
  .rectangle {
    position: relative; /* Add position relative for positioning text */
    display: flex;
    align-items: center;
    justify-content: center;
    color: black; /* Text color */
    font-size: 18px; /* Text font size */ 
  }
  .rectangle1 {
    background-color: #e0829d;
  }
  .rectangle2 {
    background-color: #4fa5d8;
  }
  .rectangle-container {
  display: flex;
  align-items: center;
  }
  .rectangle-height {
    margin-right: 10px; /* Adjust spacing between rectangle and text */
    writing-mode: vertical-lr; /* Rotate text to the left by 90° */
    transform: rotate(180deg); /* Correct orientation for vertical text */
  }
  .rectangle-width {
    margin-top: 10px;
    margin-left: 27px;
    margin-bottom: 20px;
  }
  .diameter {
    position: relative; /* Add position relative for positioning text */
    display: flex;
    align-items: center;
    justify-content: center;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(315deg);
  }
  .sensorTitle {
    margin-left: 30px;
    margin-bottom: 0px;
  }
  .phone-svg {
    position: relative;
    margin-top: 80px;
    width: 100%; /* Adjust the width as a percentage of its container */
    height: auto; /* Automatically adjust the height while maintaining aspect ratio */
  }
  .sensor-on-phone {
    position: absolute;

  }
</style>
</head>
<body onload="renderRectangle(1), renderRectangle(2)">
  <div class="container">  
    <div class="left">
      <div>
        <label class="select-dimension" for="sensorSelect1">Select Dimension:</label>
        <select class="select" id="sensorSelect1" onchange="renderRectangle(1)">
          <option value="smaller 1in">Smaller 1in (e.g. 1/3")</option>
          <option value="APS-C">APS-C</option>
          <option value="Full Frame">Full Frame</option>
          <option value="Custom">Custom</option>
        </select>
        <select class="select" id="ratioSelect1" onchange="renderRectangle(1)">
          <option value="4:3">4:3</option>
          <option value="3:2">3:2</option>
        </select>
      </div>
      <div>
        <label class="diagonal-label" for="valueInput1">Enter Diagonal (denominator for 1"):</label>
        <input type="number" id="valueInput1" name="valueInput1" min="1" value="1.28" onchange="renderRectangle(1)">
        <!-- <button onclick="renderRectangle(1)">Update</button> -->
        <input type="checkbox" id="showDiameter1" onchange="toggleTextVisibility(1)" checked>
      </div>
        <div class="sensorTitle">
        <h3 id="sensorTitle1"></h3>
      </div>
      
      <div class="rectangle-container" id="rectangleContainer1">
        <div class="rectangle-height" id="height1"></div>
        <div class="rectangle1" id="rectangle1">
          <div class="diameter" id="diameter1"></div>
        </div>
      </div>
      <div class="rectangle-width" id="width1"></div>
      
      <div>
        <label class="select-dimension" for="sensorSelect2">Select Dimension:</label>
        <select class="select" id="sensorSelect2" onchange="renderRectangle(2)">
          <option value="smaller 1in">Smaller 1in (e.g. 1/3")</option>
          <option value="APS-C">APS-C</option>
          <option value="Full Frame">Full Frame</option>
          <option value="Custom">Custom</option>
        </select>
        <select class="select" id="ratioSelect2" onchange="renderRectangle(2)">
          <option value="4:3">4:3</option>
          <option value="3:2">3:2</option>
        </select>
      </div>
      <div>
        <label class="diagonal-label" for="valueInput2">Enter Diagonal (denominator for 1"):</label>
        <input type="number" id="valueInput2" name="valueInput2" min="1" value="1" onchange="renderRectangle(2)">
        <input type="checkbox" id="showDiameter2" onchange="toggleTextVisibility(2)" checked>
      </div>
        <div class="sensorTitle">
        <h3 id="sensorTitle2"></h3>
      </div>
      <div class="rectangle-container" id="rectangleContainer2">
        <div class="rectangle-height" id="height2"></div>
        <div class="rectangle2" id="rectangle2">
          <div class="diameter" id="diameter2"></div>
        </div>
      </div>
      <div class="rectangle-width" id="width2"></div>
    <!-- Fuer die Berechnung der Pixel: 16.25 * 15
      <img id="image" src="./img/1_euro_cent_common.webp" alt="Euro Cent for reference" width="244" height="244">  -->
    </div>

    <div class="right">
      <div class="phone-svg" viewBox="0 0 100 100">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 200">
          <!-- Smartphone Body -->
          <!-- 70.6×146.6×8.3 millimeters (iPhone 15 Pro) | 1px = 1mm -->
          <rect x="2" y="2" width="71" height="147" rx="10" ry="10" fill="none" stroke="#131313" stroke-width="2"/>
          <rect x="7" y="7" width="40" height="40" rx="10" ry="10" fill="none" stroke="#131313" stroke-width="2"/>
          <!-- Camera -->
          <circle cx="18" cy="17" r="8" fill="#131313"/> 
          <circle cx="36" cy="26" r="8" fill="#131313"/> 
          <circle cx="18" cy="37" r="8" fill="#131313"/> 

          <!-- Sensor -->
          <rect class="sensor-on-phone" id="sensor-on-phone" x="19" y="15.5" width="100" height="100" fill="#e0829d" opacity="1"/>
        </svg>
        <div class="smartphone-width">
          <p>&#x2190;</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    function renderRectangle(rectangleNumber) {
      var sensorType = document.getElementById("sensorSelect" + rectangleNumber).value;
      var aspectRatio = document.getElementById("ratioSelect" + rectangleNumber).value;
      var value = document.getElementById("valueInput" + rectangleNumber).value;
      var width, height;
      var sensorTitle;
      var multiplier = 15;

      if (value < 1) {
        value = 1;
  
      }
      alert();
      if (aspectRatio === "4:3") {
        aspectRatio = 0.75;
      }
      else if (aspectRatio === "3:2") {
        aspectRatio = 2 / 3;
      }

      switch (sensorType) {
        case "Full Frame":
          width = 36;
          height = 24;
          sensorTitle = "Full Frame Sensor";
          break;
        case "APS-C":
          width = 22;
          height = 14.8;
          sensorTitle = "APS-C Sensor";
          break;
        case "smaller 1in":
          if (value === "1"){
            sensorTitle = "1 inch Sensor";
          }
          else {
            sensorTitle = "1/" + value + " inch Sensor";
          }
          value = 16 / value;
          width = Math.sqrt((value ** 2) / (aspectRatio ** 2 + 1));
          height = width * aspectRatio;
          break;
        case "Custom":
          width = Math.sqrt((value ** 2) / (aspectRatio ** 2 + 1));
          height = width * aspectRatio;
          sensorTitle = value + " mm Sensor";
          break;
        default:
          alert();
      }
      
      // Drawing rectangle on the left page
      var rectangle = document.getElementById("rectangle" + rectangleNumber);
      rectangle.style.width = width * multiplier + "px";
      rectangle.style.height = height * multiplier + "px";
      diameter = Math.sqrt(height ** 2 + width ** 2);
      
      // Setting sensor measurements
      document.getElementById("width" + rectangleNumber).textContent = "\u2190  " + (width).toFixed(2) + " mm" + "  \u2192";
      document.getElementById("height" + rectangleNumber).textContent = "\u2190  " + (height).toFixed(2) + " mm" + "  \u2192";
      document.getElementById("diameter" + rectangleNumber).textContent = "\u2190  " + (diameter).toFixed(2) + " mm" + "  \u2192";
      document.getElementById("sensorTitle" + rectangleNumber).textContent = sensorTitle;

      // Drawing rectangle on the phone
      if (rectangleNumber == 1){
        var phoneSensor = document.getElementById("sensor-on-phone");
        if (document.getElementById("valueInput" + rectangleNumber).value == 1) {
          phoneSensor.setAttribute('x', 13.2);
        }
        else {
          phoneSensor.setAttribute('x', 19 - (width / 2));
        }
        phoneSensor.setAttribute('y', 15.5 - (height / 2));
        phoneSensor.style.width = height + "px";
        phoneSensor.style.height = width + "px";
      }  
    }
    
    function toggleTextVisibility(rectangleNumber) {
      var checkbox = document.getElementById("showDiameter" + rectangleNumber);
      var textElement = document.getElementById("diameter" + rectangleNumber);
      textElement.style.display = checkbox.checked ? "block" : "none";
    }
  </script>
</body>
</html>
